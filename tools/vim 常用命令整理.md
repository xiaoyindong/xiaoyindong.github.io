## 1. 概述

```Vim```是一个类似于```Vi```的著名的功能强大、高度可定制的文本编辑器，在```Vi```的基础上改进和增加了很多特性。```VIM```是自由软件。被推崇为类```Vi```编辑器中最好的一个，事实上真正的劲敌来自```Emacs```的不同变体。```1999``` 年```Emacs```被选为```Linuxworld```文本编辑分类的优胜者，```Vim```屈居第二。但在```2000```年```2```月```Vim```赢得了```Slashdot Beanie```的最佳开放源代码文本编辑器大奖，又将```Emacs```推至二线， 总的来看， ```Vim```和```Emacs```在文本编辑方面都是非常优秀的。

```vim``` 的[官方网站](http://www.vim.org?_blank)自己也说 ```vim``` 是一个程序开发工具而不是文字处理软件。

## 2. 使用

基本上 ```vi/vim``` 共分为三种模式，分别是```命令模式（Command mode）```，```输入模式（Insert mode```）和```底线命令模式（Last line mode）```。

### 1. 命令模式

用户刚刚启动 ```vi/vim```，便进入了命令模式。

此状态下敲击键盘动作会被```Vim```识别为命令，而非输入字符。比如我们此时按下```i```，并不会输入一个字符，```i```被当作了一个命令。

以下是常用的几个命令：

i 切换到输入模式，以输入字符。

x 删除当前光标所在处的字符。

: 切换到底线命令模式，以在最底一行输入命令。

若想要编辑文本：启动```Vim```，进入了命令模式，按下```i```，切换到输入模式。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

### 2. 输入模式

在命令模式下按下```i```就进入了输入模式。

在输入模式中

字符按键以及```Shift```组合，输入字符

ENTER，回车键，换行

BACK SPACE，退格键，删除光标前一个字符

DEL，删除键，删除光标后一个字符

方向键，在文本中移动光标

HOME/END，移动光标到行首/行尾

Page Up/Page Down，上/下翻页

Insert，切换光标为输入/替换模式，光标将变成竖线/下划线

ESC，退出输入模式，切换到命令模式

### 底线命令模式

在命令模式下按下```:```就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：

q 退出程序

w 保存文件

按ESC键可随时退出底线命令模式。

简单的说，我们可以将这三个模式想成底下的图标来表示

## 3. 使用方式

在终端命令行中输入

```s
vim name.txt
```
如果文件存在，则打开文件编辑页面，如文件不存在，则打开创建文件编辑页面。
一般光标默认在编辑框左上角，文件名在编辑框左下角
打开的编辑页面中，```~```表示该行没有任何内容。

## 4. 输入

在一般模式之中，只要按下 ```i```, ```o```, ```a``` 等字符就可以进入输入模式了！

在编辑模式当中，你可以发现在左下角状态栏中会出现 ```–INSERT-``` 的字样，那就是可以输入任意字符的提示。

这个时候，键盘上除了 ```Esc``` 这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以你可以进行任何的编辑

## 5. 停止编辑

按下 ```ESC``` 按钮回到一般模式，马上你就会发现画面左下角的 ```– INSERT –``` 不见了！

## 6. 保存

输入 ```:wq``` 即可保存离开！

和我们使用```UI```页面操作文件的思维有些不同，使用```vi```命令操作文件，需要如下步骤

### 1. 使用 vi 文件名 打开文件, 

### 2. 按下 i 字符切换到编辑模式。

### 3. 按下esc退出编辑模式，此时文件并未保存到硬盘。相当于在编辑器中修改，并未按ctrl + s

#### 4. 输入:wq保存文件。

## 6. 按键说明

除了上面简易范例的 ```i```,``` Esc```, ```:wq``` 之外，其实 ```vim``` 还有非常多的按键可以使用

### 1. 一般模式

一般模式可用的光标移动、复制粘贴、搜索替换等

h 或 左剪头(←): 光标向左移动一个字符

j 或 向下箭头键(↓): 光标向下移动一个字符

k 或 向上箭头键(↑): 光标向上移动一个字符

l 或 向右箭头键(→): 光标向右移动一个字符


如果你将右手放在键盘上的话，你会发现 ``hjkl`` 是排列在一起的，因此可以使用这四个按钮来移动光标。 如果想要进行多次移动的话，例如向下移动 ```30``` 行，可以使用 ```30j``` 或 ```30↓``` 的组合按键， 亦即加上想要进行的次数(数字)后，按下动作即可！

1. Ctrl + f:	屏幕『向下』移动一页，相当于 [Page Down]按键 (常用)

2. Ctrl + b: 屏幕『向上』移动一页，相当于 [Page Up] 按键 (常用)

3. Ctrl + d:	屏幕『向下』移动半页

4. Ctrl + u:	屏幕『向上』移动半页

5. \+: 光标移动到非空格符的下一行

6. \-: 光标移动到非空格符的上一行

7. n + 空格键: n 表示『数字』，例如 20 。按下数字后再按"空格键"，光标会向右移动这一行的 n 个字符。例如 20空格 则光标会向后面移动 20 个字符距离。

8. 0: 或功能键[Home]: 这是数字『 0 』：移动到这一行的最前面字符处 (常用)

9. $: 或功能键[End]: 移动到这一行的最后面字符处(常用)

10. H: 光标移动到这个屏幕的最上方那一行的第一个字符

11. M: 光标移动到这个屏幕的中央那一行的第一个字符

12. L: 光标移动到这个屏幕的最下方那一行的第一个字符

13. G: 移动到这个档案的最后一行(常用)

14. nG: n 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 20 行(可配合 :set nu)

15. gg: 移动到这个档案的第一行，相当于 1G 啊！ (常用)

16. n回车: n 为数字。光标向下移动 n 行(常用)

17. /word: 向光标之下寻找一个名称为 word 的字符串。例如要在档案内搜寻 vbird 这个字符串，就输入 /vbird 即可！ (常用)

18. ?word: 向光标之上寻找一个字符串名称为 word 的字符串。

19. n: 这个 n 是英文按键。代表重复前一个搜寻的动作。举例来说， 如果刚刚我们执行 /vbird 去向下搜寻 vbird 这个字符串，则按下 n 后，会向下继续搜寻下一个名称为 vbird 的字符串。如果是执行 ?vbird 的话，那么按下 n 则会向上继续搜寻名称为 vbird 的字符串！

20. N: 这个 N 是英文按键。与 n 刚好相反，为『反向』进行前一个搜寻动作。 例如 /vbird 后，按下 N 则表示『向上』搜寻 vbird 。

使用 ```/word``` 配合 ```n``` 及 ```N``` 是非常有帮助的！可以让你重复的找到一些你搜寻的关键词！

21. :n1,n2s/word1/word2/g: n1 与 n2 为数字。在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2 ！举例来说，在 100 到 200 行之间搜寻 vbird 并取代为 VBIRD 则：```:100,200s/vbird/VBIRD/g```。(常用)

22. :1,$s/word1/word2/g 或 :%s/word1/word2/g: 从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！(常用)

23. :1,$s/word1/word2/gc 或 :%s/word1/word2/gc: 从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代！(常用)

24. x, X: 在一行字当中，x 为向后删除一个字符 (相当于 [del] 按键)， X 为向前删除一个字符(相当于退格键) (常用)

25. nx: n 为数字，连续向后删除 n 个字符。举例来说，我要连续删除 10 个字符， 『10x』。

26. dd: 删除游标所在的那一整行(常用)

27. ndd: n 为数字。删除光标所在的向下 n 行，例如 20dd 则是删除 20 行 (常用)

28. d1G: 删除光标所在到第一行的所有数据

29. dG: 删除光标所在到最后一行的所有数据

30. d$: 删除游标所在处，到该行的最后一个字符

31. d0: 那个是数字的 0 ，删除游标所在处，到该行的最前面一个字符

32. yy: 复制游标所在的那一行(常用)

33. nyy: n 为数字。复制光标所在的向下 n 行，例如 20yy 则是复制 20 行(常用)

34. y1G: 复制游标所在行到第一行的所有数据

35. yG: 复制游标所在行到最后一行的所有数据

36. y0: 复制光标所在的那个字符到该行行首的所有数据

37. y$: 复制光标所在的那个字符到该行行尾的所有数据

38. p, P: p 为将已复制的数据在光标下一行贴上，P 则为贴在游标上一行！ 举例来说，我目前光标在第 20 行，且已经复制了 10 行数据。则按下 p 后， 那 10 行数据会贴在原本的 20 行之后，亦即由 21 行开始贴。但如果是按下 P 呢？ 那么原本的第 20 行会被推到变成 30 行。 (常用)

39. J: 将光标所在行与下一行的数据结合成同一行

40. c: 重复删除多个数据，例如向下删除 10 行，[ 10cj ]

41. u: 复原前一个动作。(常用)

42. Ctrl + r: 重做上一个动作。(常用)

这个 ```u``` 与 ```Ctrl+r``` 是很常用的指令！一个是复原，另一个则是重做一次～ 利用这两个功能按键，你的编辑，嘿嘿！很快乐的啦！

43. ```.```不要怀疑！这就是小数点！意思是重复前一个动作的意思。 如果你想要重复删除、重复贴上等等动作，按下小数点『.』就好了！ (常用)

### 2. 编辑模式

1. i, I:	进入输入模式(Insert mode)：

```i``` 为从目前光标所在处输入， ```I``` 为在目前所在行的第一个非空格符处开始输入。 (常用)

2. a, A: 进入输入模式(Insert mode)：

```a``` 为从目前光标所在的下一个字符处开始输入， ```A``` 为从光标所在行的最后一个字符处开始输入。(常用)

3. o, O: 进入输入模式(Insert mode)：

这是英文字母 ```o``` 的大小写。```o``` 为在目前光标所在的下一行处输入新的一行； ```O``` 为在目前光标所在处的上一行输入新的一行！(常用)

4. r, R: 进入取代模式(Replace mode)：

```r``` 只会取代光标所在的那一个字符一次；```R```会一直取代光标所在的文字，直到按下 ```ESC``` 为止；(常用)

上面这些按键中，在 vi 画面的左下角处会出现『--INSERT--』或『--REPLACE--』的字样。 由名称就知道该动作了吧！！特别注意的是，我们上面也提过了，你想要在档案里面输入字符时， 一定要在左下角处看到 INSERT 或 REPLACE 才能输入喔！

5. Esc: 退出编辑模式，回到一般模式中(常用)

### 3. 指令模式

1. :w: 将编辑的数据写入硬盘档案中(常用)

2. :w!: 若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关啊！

3. :q: 离开 vi (常用)

4. :q!: 若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。

注意惊叹号 ```!``` 在``` vi``` 当中，常常具有强制的意思～

5. :wq: 储存后离开，若为 :wq! 则为强制储存后离开 (常用)

6. ZZ: 这是大写的 Z 喔！若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开！

7. :w [filename]: 将编辑的数据储存成另一个档案（类似另存新档）

8. :r [filename]: 在编辑的数据中，读入另一个档案的数据。亦即将```filename```这个档案内容加到游标所在行后面

9. :n1,n2 w [filename]: 将 n1 到 n2 的内容储存成 ```filename``` 这个档案。

10. :! command: 暂时离开 ```vi``` 到指令行模式下执行 ```command``` 的显示结果！例如```:! ls /home```即可在 ```vi``` 当中察看 ```/home``` 底下以 ```ls``` 输出的档案信息！

11. :set nu: 显示行号，设定之后，会在每一行的前缀显示该行的行号

12. :set nonu: 与 ```set nu``` 相反，为取消行号！

特别注意，在 ```vi/vim``` 中，数字是很有意义的！数字通常代表重复做几次的意思！ 也有可能是代表去到第几个什么什么的意思。

举例来说，要删除 ```50``` 行，则是用```50dd```对吧！ 数字加在动作之前，如我要向下移动 ```20``` 行呢？那就是```20j```或者是```20↓```即可。


### 参考来源

- [1] [菜鸟教程](https://www.runoob.com/linux/linux-vim.html?_blank) "vim/vi"
